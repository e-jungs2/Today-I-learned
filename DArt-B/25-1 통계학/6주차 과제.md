# 통계학 6주차 정규과제

📌통계학 정규과제는 매주 정해진 분량의 『*데이터 분석가가 반드시 알아야 할 모든 것*』 을 읽고 학습하는 것입니다. 이번 주는 아래의 **Statistics_6th_TIL**에 나열된 분량을 읽고 `학습 목표`에 맞게 공부하시면 됩니다.

아래의 문제를 풀어보며 학습 내용을 점검하세요. 문제를 해결하는 과정에서 개념을 스스로 정리하고, 필요한 경우 추가자료와 교재를 다시 참고하여 보완하는 것이 좋습니다.

6주차는 `3부. 데이터 분석하기`를 읽고 새롭게 배운 내용을 정리해주시면 됩니다.


## Statistics_6th_TIL

### 3부. 데이터 분석하기
### 12.통계 기반 분석 방법론



## Study Schedule

|주차 | 공부 범위     | 완료 여부 |
|----|----------------|----------|
|1주차| 1부 p.2~56     | ✅      |
|2주차| 1부 p.57~79    | ✅      | 
|3주차| 2부 p.82~120   | ✅      | 
|4주차| 2부 p.121~202  | ✅      | 
|5주차| 2부 p.203~254  | ✅      | 
|6주차| 3부 p.300~356  | ✅      | 
|7주차| 3부 p.357~615  | 🍽️      |

<!-- 여기까진 그대로 둬 주세요-->

# 12.통계 기반 분석 방법론

```
✅ 학습 목표 :
* 주성분 분석(PCA)의 개념을 설명할 수 있다.
* 다중공선성을 진단할 수 있다.
* Z-TEST와 T-TEST의 개념을 비교하고, 적절한 상황에서 검정을 설계하고 수행할 수 있다.
* ANOVA TEST를 활용하여 세 개 이상의 그룹 간 평균 차이를 검정하고, 사후검정을 수행할 수 있다.
* 카이제곱 검정을 통해 범주형 변수 간의 독립성과 연관성을 분석하는 방법을 설명할 수 있다.
```

## 12.1. 분석 모델 개요
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
- 통계 모델 : 모형과 해석을 중요하게 생각하며, 오차와 불확정성을 강조함.
![alt text](<../25-1 img/25-1 통계학 img/6주차/2.png>)
- 기계 학습 : 대용량 데이터를 활용하여 예측의 정확도를 높이는 것을 중요하게 생각함. 
![alt text](<../25-1 img/25-1 통계학 img/6주차/3.png>)

![alt text](<../25-1 img/25-1 통계학 img/6주차/1.png>)

- 지도학습 : 입력에 대한 정답이 주어져서 출력된 결괏값과 정답 사이의 오차가 줄어들도록 학습과 모델 수정을 반복함.
- 자율학습 : 비지도 학습은 별도의 정답이 없이 변수 간의 패턴을 파악하거나 데이터를 군집화하는 방법.
- 강화학습 : 동물이 시행착오를 통해 학습하는 과정을 기본 콘셉트로 한 방법 중 하나.

## 12.2. 주성분 분석(PCA)
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
여러 개의 독립변수들을 잘 설명해줄 수 있는 주된 성분을 추출하는 기법.\
전체 변수들의 핵심 특성만 선별하기 때문에, 독립변수(차원)의 수를 줄일 수 있음.
![alt text](<../25-1 img/25-1 통계학 img/6주차/4.png>)

![alt text](<../25-1 img/25-1 통계학 img/6주차/5.png>)
X1 X2 두 변수가 있음. PCA의 원리는 이러한 데이터의 분산을 가장 잘 표현할 수 있는 저차원을 찾아내는 것. 
1. 데이터 표준화
2. 데이터의 분산을 가장 잘 나타낼 수 있는 축을 찾아줌.

![alt text](<../25-1 img/25-1 통계학 img/6주차/6.png>)
> 1번 축과 2번 축보다 3번 축이 가장 많은 분산을 담아낼 수 있음을 확인할 수 있음.

> 해당 차원의 가장 많은 분산을 담아내는 축이 `주성분`이 됨.

![alt text](<../25-1 img/25-1 통계학 img/6주차/7.png>)
> 각 포인트들의 직각 지점까지의 거리의 합이 가장 큰 축이 주성분이 됨. 피타고라스이 정리에 의해 자연히 각 포인트와 주성분 축과의 거리 합은 최소가 됨.


## 12.4. 다중공선성 해결과 섀플리 밸류 분석
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
- 다중공선성 : 독립변수들 간의 상관관계가 높은 현상. 두 개 이상의 독립변수가 서로 선형적인 관계를 나타낼 때 다중공선성이 있다고 함.
- 독립변수들 간에는 서로 독립이라는 회귀분석의 전제 가정을 위협. 
- 회귀분석에서 다중공선성이 발생하게 되면 추정치의 통계적 유의성이 낮아셔 모델의 정합성이 맞지 않는 문제 발생.
![alt text](<../25-1 img/25-1 통계학 img/6주차/8.png>)

> 교통사고 발생확률을 예측하는 변수로 마신 소주의 양(ml)과 혈중알코올농도를 사용한다고
했을 때, 마신 술의 양과 혈중알코올농도는 매우 높은 상관관계를 나타낼 것. 이렇게 되면 회귀계수의 분산이 과도하게 증가하고 회귀계수 추정치의 해석이 어려워짐. 또한 예측 성능이 과장되어 나올 수 있기 때문에 모델의 유의성을 판단하기 어려워짐.

- 회귀분석 결과에서 독립변수들의 설명력을 의미하는 결정계수 R-squared 값은 크지만 회귀계수에 대한 t-value가 낮다면 다중공선성 의심 됨.
  - 종속변수에 대한 독립변수들의 설명력은 높지만 각 계수 추정치의 표준오차가 크다는 것.
  - 독립변수 간에 상관성이 크다는 것.
![alt text](<../25-1 img/25-1 통계학 img/6주차/9.png>)

- VIF(분산팽창계수)를 통해 다중공선성 판단 가능. 회귀분석 모델에 사용된 다른 독립 변수들이 해당 변수 대신 모델을 설명해 줄 수 있는 정도. 해당 변수가 다른 변수들에 의해 설명될 수 있는 정도. 

<다중공선성을 해결하기 위한 방법>
1. VIF값이 높은 변수들 중에서 종속변수와의 상관성(설명성)이 가장 낮은 변수를 제거하고 다시 VIF값을 확인하는 것을 반복하는 것.
2. 표본 관측치를 추가적으로 확보하여 다중공선성을 완화하는 방법. -> 잘 쓰이지 않음.
3. 주성분분석을 통해서도 다중공선성 해결 가능 -> 변수의 해석이 어려워짐.
4. 데이터 분석 환경에서 제공하는 변수 선택 알고리즘을 활용하는 방법이 있음. 전진 선택법, 후진 제거법, 단계적 선택법이 있음.
![alt text](<../25-1 img/25-1 통계학 img/6주차/10.png>)

## 12.6. Z-test와 T-test
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
- 집단 내 혹은 집단 간의 평균값 차이가 통계적으로 유의미한 것인지 알아내는 방법. 

- Z-test와 T-test는 단일 표본 집단의 평균 변화를 분석하거나 두 집단의 평균값 혹은 비율 차이를 분
석할 때 사용함.

- Z-test와 T-test는 분석하고자 하는 변수가 양적 변수이며, 정규 분포이며, 등분산이라는 조건이 충족되어야 함. 
  - 등분산 조건의 경우, bartlett 등분산성 검정을 통해 확인할 수 있으며, 등분산을 만족하면 equal variance t-test를 수행하고 만족하지 않으면 이분산이므로, Welch's t-test를 수행함.
  
- Z-test와 T-test는 중에서 분석 방법을 선택하는 기준은 모집단의 분산을 알 수 있는지와 표본의 크기에 따라 달라짐.
  - Z-test는 본래 모집단의 분산을 알 수 있는 경우에 사용되지만, 모집단의 분산을 알 수 있는 경우는 보통 거의 없다. 하지만 표본의 크기가 30 이상이면 중심 극한 정리에 의해 표본평균분포가 정규분포를 따른다고 볼 수 있으므로 Z-test 사용이 가능함.
  -  T-test는 표본의 크기가 30 미만이어서 표본 집단의 정규분포를 가정할 수 없을 때 사용됨. 물론 표본 집단의 크기가 30 이상일 때도 사용 가능하기 때문에 일반적으로 T-test를 사용함.
  ![alt text](<../25-1 img/25-1 통계학 img/6주차/11.png>)

## 12.7. ANOVA
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
- 세 집단 이상의 평균 차이를 검정할 때 사용함.
- Analysis Of Varience, 분산분석.
- F분포를 사용함. F검정의 통계값은 집단 간 분산의 비율을 나타냄.
- 일원분산분석, 이원분산분석 등 다양한 이름으로 불림.
- ANOVA는 각 집단간의 평균값 차이가 통계적으로 유의한지 검증함. 
![alt text](<../25-1 img/25-1 통계학 img/6주차/12.png>)

## 12.8. 카이제곱 검정(교차분석)
<!-- 새롭게 배운 내용을 자유롭게 정리해주세요.-->
- 교차분석이라고도 불림.
- 명목 혹은 서열척도와 같은 범주형 변수들 간의 연관성을 분석하기 위해 결합분포를 활용함.
- 상관분석과는 달리 연관성의 정도를 수치로 표현할 수는 없지만, 검정 통계량 카이 제곱을 통해 변수 간에 연관성이 없다는 귀무가설을 기각하는지 여부로 상관성이 있고 없음을 판단함.

<br>
<br>

# 확인 문제

### **문제 1.**
> **🧚 경희는 다트비 교육 연구소의 연구원이다. 경희는 이번에 새롭게 개발한 교육 프로그램이 기존 프로그램보다 학습 성취도 향상에 효과적인지 검증하고자 100명의 학생을 무작위로 두 그룹으로 나누어 한 그룹(A)은 새로운 교육 프로그램을, 다른 그룹(B)은 기존 교육 프로그램을 수강하도록 하였다. 실험을 시작하기 전, 두 그룹(A, B)의 초기 시험 점수 평균을 비교한 결과, 유의미한 차이가 없었다. 8주 후, 학생들의 최종 시험 점수를 수집하여 두 그룹 간 평균 점수를 비교하려고 한다.**   

> **🔍 Q1. 이 실험에서 사용할 적절한 검정 방법은 무엇인가요?**

```
독립표본 t-test
```

> **🔍 Q2. 이 실험에서 설정해야 할 귀무가설과 대립가설을 각각 작성하세요.**

```
H0 : 새로운 교육 프로그램(A)과 기존 프로그램(B)간의 성취도 평규네 차이가 없다.
H1 : 새로운 교육 프로그램(A)은 기존의 프로그램(B)과의 학습 성취도에 차이가 있다.
```

> **🔍 Q3. 검정을 수행하기 위한 절차를 순서대로 서술하세요.**

<!--P.337의 실습 코드 흐름을 확인하여 데이터를 불러온 후부터 어떤 절차로 검정을 수행해야 하는지 고민해보세요.-->

```
1. 가설을 설정한다.
2. 유의수준을 설정한다.
3. 정규성 검정, 등분산성 검정한다.
4. 알맞은 t-test 방법을 설정한다.
5. 검정통계량을 계산한다.
6. p-value를 계산하거나 t 임계값과 비교한다.
7. 귀무가설을 기각하거나 채택한다.

```

> **🔍 Q4. 이 검정을 수행할 때 가정해야 하는 통계적 조건을 설명하세요.**

```
등분산성, 정규성 가정을 만족하는지 검정해야한다. 가정을 위반하면 독립표본 t-test는 쓰지 못하고, 가정을 위반하는 경우 welch's t-test를 써야한다.
```

> **🔍 Q5. 추가적으로 최신 AI 기반 교육 프로그램(C)도 도입하여 기존 프로그램(B) 및 새로운 프로그램(A)과 비교하여 성취도 차이가 있는지 평가하고자 한다면 어떤 검정 방법을 사용해야 하나요? 단, 실험을 시작하기 전, C 그룹의 초기 점수 평균도 A, B 그룹과 유의미한 차이가 없었다고 가정한다.**

```
ANOVA 테스트를 진행해야 한다. 그 중에서도 일원분산분석을 사용해야 한다.
```

> **🔍 Q6. 5번에서 답한 검정을 수행한 결과, 유의미한 차이가 나타났다면 추가적으로 어떤 검정을 수행해 볼 수 있을까요?**

```
Tukey 사후검정을 진행해야 한다.
```

---

### **문제 2. 카이제곱 검정**  
> **🧚 다음 중 어떠한 경우에 카이제곱 검정을 사용해야 하나요?   
1️⃣ 제품 A, B, C의 평균 매출 차이를 비교하고자 한다.  
2️⃣ 남성과 여성의 신체 건강 점수 평균 차이를 분석한다.  
3️⃣ 제품 구매 여부(구매/미구매)와 고객의 연령대(10대, 20대, 30대…) 간의 연관성을 분석한다.  
4️⃣ 특정 치료법이 환자의 혈압을 감소시키는 효과가 있는지 확인한다.**  

```
3번의 경우 카이제곱 검정을 사용해야 한다. 범주형이기 때문이다.
```

### 🎉 수고하셨습니다.