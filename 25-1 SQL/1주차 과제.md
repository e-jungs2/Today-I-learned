# 1주차 과제
## 윈도우 함수 (Window Functions) 학습 및 문제 풀이
### 14.20.2. Window Fuction Concepts and Syntax
- Window Fuction : Group by와 비슷하지만, 각 행에 대한 개별적인 결과를 제공하는 함수임.\
집계 함수처럼 동작하면서도 원본 데이터를 유지하면서 추가적인 분석을 할 수 있는 기능임.

#### 집계 함수 vs 윈도우 함수 비교
| 구분 | 설명 | 예제 |
|------|------|------|
| **집계 함수 (GROUP BY 사용)** | 데이터를 그룹화하고, 그룹별로 하나의 값만 반환 | `SUM(profit)`, `AVG(profit)` |
| **윈도우 함수** | 그룹화된 데이터에서 **각 행마다 개별적인 계산 결과를 반환** | `SUM(profit) OVER(...)`, `AVG(profit) OVER(...)` |

---

#### 예제 데이터 (`sales` 테이블)

```sql
SELECT * FROM sales ORDER BY country, year, product;
```

| year | country | product | profit |
|------|---------|---------|--------|
| 2000 | Finland | Computer | 1500 |
| 2000 | Finland | Phone | 100 |
| 2001 | Finland | Phone | 10 |
| 2000 | India | Calculator | 75 |
| 2000 | India | Computer | 1200 |
| 2001 | USA | TV | 150 |

---

##### 윈도우 함수 없이 그룹별 합계 (GROUP BY 사용)
```sql
SELECT country, SUM(profit) 
FROM sales 
GROUP BY country;
```
 `GROUP BY`를 사용하면 나라별 `profit` 합계를 구하지만, 각 행이 사라지고 **나라별 한 행만 남음**  

| country | SUM(profit) |
|---------|------------|
| Finland | 1610 |
| India | 1275 |
| USA | 150 |

---

##### 윈도우 함수를 사용한 누적합
```sql
SELECT country, product, profit,
       SUM(profit) OVER(PARTITION BY country) AS total_profit
FROM sales;
```
`OVER(PARTITION BY country)`를 사용하면, **각 행은 그대로 유지되면서 해당 국가별 합계가 추가**됨.

| country | product | profit | total_profit |
|---------|---------|--------|-------------|
| Finland | Computer | 1500 | 1610 |
| Finland | Phone | 100 | 1610 |
| Finland | Phone | 10 | 1610 |
| India | Calculator | 75 | 1275 |
| India | Computer | 1200 | 1275 |
| USA | TV | 150 | 150 |

---

#### <결론>
- `GROUP BY`는 데이터를 그룹으로 묶고, 하나의 값만 남김.
- **윈도우 함수(`OVER()`)는 그룹화하면서도 개별 행의 정보를 유지**  
- `SUM()`, `AVG()`, `RANK()` 등과 함께 사용 가능.

즉, **윈도우 함수는 "개별 행을 유지하면서도 그룹 내 집계 계산이 필요한 경우" 사용**하면 좋음.

